(()=>{"use strict";var e={p:""};const t=function(e){const t=document.createElement("DIV"),n=document.createElement("INPUT"),o=document.createElement("SPAN"),s=document.createElement("SPAN"),c=document.createElement("TEXTAREA"),r=document.createElement("BUTTON"),d=document.createElement("SPAN");t.classList.add("dialog_box"),n.classList.add("input_file"),o.classList.add("button_action"),s.classList.add("display_none"),c.classList.add("textarea_task"),r.classList.add("button_add"),d.classList.add("span_closed"),n.type="file",o.textContent="Stick pic",c.placeholder="Enter a title for this card...",r.textContent="Add Card",d.textContent="╳",e.closest(".column").appendChild(t),t.prepend(d),t.prepend(r),t.prepend(c),t.prepend(s),t.prepend(o),t.prepend(n);const{width:a,height:l}=o.getBoundingClientRect();let i;n.style.width=`${a}px`,n.style.height=`${l}px`,n.addEventListener("change",(()=>{const e=n.files&&n.files[0];if(!e)return;const t=new FileReader;t.addEventListener("load",(e=>{i=e.target.result,function(e,t){const n=document.createElement("DIV"),o=document.createElement("IMG");n.classList.add("container_image"),o.classList.add("preview_image"),o.src=t,e.appendChild(n),n.appendChild(o)}(s,i),s.classList.remove("display_none")})),t.readAsDataURL(e),n.value=null}));const m=()=>{t.closest(".column").appendChild(e),t.remove(t)};d.addEventListener("click",m),r.addEventListener("click",(()=>{const e=document.createElement("DIV");e.classList.add("task"),t.closest(".column").appendChild(e);const n=document.createElement("P");if(n.classList.add("task_text"),n.textContent=c.value,e.prepend(n),i){const t=document.createElement("IMG");t.classList.add("task-image"),t.classList.add("picture"),t.src=i,e.prepend(t)}m()}))},n=e.p+"assets/879c132429fd8d8eb57a63100fb87569.png";class o{constructor(){this.columnTodo=document.querySelector(".todo"),this.columnInProgress=document.querySelector(".in_progress"),this.columnDone=document.querySelector(".done")}static renderingTextTask(e,t){const n=document.createElement("DIV"),o=document.createElement("P");n.classList.add("task"),o.classList.add("task_text"),o.textContent=t,e.querySelector(".add_card").parentNode.insertBefore(n,e.querySelector(".add_card")),n.prepend(o)}static renderingImg(e,t,n){const o=document.createElement("DIV"),s=document.createElement("IMG"),c=document.createElement("P");o.classList.add("task"),s.classList.add("task-image"),s.classList.add("picture"),c.classList.add("task_text"),s.src=n,c.textContent=t,e.querySelector(".add_card").parentNode.insertBefore(o,e.querySelector(".add_card")),o.prepend(c),o.prepend(s)}defaultContent(e){return e===this.columnTodo?["Welcome to Trello!","This is a card","Click on a card what's behind it"]:e===this.columnInProgress?["Invite your time to this board using the Add Members button","Drag people onto a card to indicate that they're responsible for it"]:e===this.columnDone?["To learn more tricks, check out the guide","Use as many boards as you want. We'll make more!"]:null}actionDefault(){this.defaultContent(this.columnTodo).forEach((e=>{o.renderingTextTask(this.columnTodo,e)})),o.renderingImg(this.columnTodo,"You can attach pictures and files",n),this.defaultContent(this.columnInProgress).forEach((e=>{o.renderingTextTask(this.columnInProgress,e)})),this.defaultContent(this.columnDone).forEach((e=>{o.renderingTextTask(this.columnDone,e)}))}actionStorage(e){e.toDo.forEach((e=>{o.renderingTextTask(this.columnTodo,e)})),e.inProgress.forEach((e=>{o.renderingTextTask(this.columnInProgress,e)})),e.done.forEach((e=>{o.renderingTextTask(this.columnDone,e)}))}}console.log("app.js is bunled");const s=new o,c=new class{constructor(){this.storage=localStorage}save(e){this.storage.setItem("dataTrello",JSON.stringify(e))}load(){try{return JSON.parse(this.storage.getItem("dataTrello"))}catch(e){throw new Error("Invalid data")}}statusChange(e,t){const n=this.load();for(const o in n)o===e&&(n[o].status=t);this.save(n)}remove(){let e=this.load();e={},this.save(e)}},r=c.load(),d={};null===r||void 0===r.toDo?s.actionDefault():s.actionStorage(r);const a=document.querySelector(".save_button");let l;document.querySelector(".reset_button").addEventListener("click",(()=>{Array.from(document.querySelectorAll(".task")).forEach((e=>{e.remove()})),c.remove(),s.actionDefault()})),a.addEventListener("click",(()=>{const e=Array.from(document.querySelector(".todo").querySelectorAll(".task_text")),t=Array.from(document.querySelector(".in_progress").querySelectorAll(".task_text")),n=Array.from(document.querySelector(".done").querySelectorAll(".task_text"));d.toDo=[],d.inProgress=[],d.done=[],e.forEach((e=>{d.toDo.push(e.textContent)})),t.forEach((e=>{d.inProgress.push(e.textContent)})),n.forEach((e=>{d.done.push(e.textContent)})),c.save(d)}));const i=e=>{const{target:t}=e;if(l.style.top=e.clientY-20+"px",l.style.left=e.clientX-50+"px",t.classList.contains("task")||t.classList.contains("title")){const{y:n,height:o}=t.getBoundingClientRect(),s=function(e){const t=document.createElement("div"),{width:n,height:o}=e.getBoundingClientRect();return t.classList.add("shadow_element"),t.style.width=`${n}px`,t.style.height=`${o}px`,t}(document.querySelector(".dragged"));let c;n+o/2>e.clientY&&!t.classList.contains("title")&&(document.querySelector(".shadow_element")&&document.querySelector(".shadow_element").remove(),c=e.target.previousElementSibling.closest(".task")||e.target.previousElementSibling.closest("h1"),c&&c.insertAdjacentElement("afterend",s)),n+o/2<e.clientY&&(document.querySelector(".shadow_element")&&document.querySelector(".shadow_element").remove(),c=e.target.nextElementSibling.closest(".task")||e.target.nextElementSibling.closest(".add_card"),c&&c.insertAdjacentElement("beforebegin",s))}},m=e=>{const t=e.targetTouches[0],{target:n}=e;l.style.top=t.pageY-20+"px",l.style.left=t.pageX-50+"px",t.pageX+20<n.closest(".column").offsetLeft&&n.closest(".task").remove()};document.querySelectorAll(".add_card").forEach((e=>{e.addEventListener("click",(n=>{n.preventDefault(),t(e),e.remove(e)}))}));const u=e=>{const t=e.target.closest(".task");if(t){const e=t.closest(".column"),n=function(){const e=document.createElement("div");return e.classList.add("closed_element"),e.textContent="╳",e}(),{width:o}=t.getBoundingClientRect();n.style.top=`${t.offsetTop+2}px`,n.style.left=o+t.offsetLeft-17+"px",e.querySelector(".closed_element")||(n.addEventListener("click",(()=>{t.remove(),n.remove()})),e.insertAdjacentElement("afterbegin",n))}document.querySelector(".closed_element")&&!t&&e.target!==document.querySelector(".closed_element")&&document.querySelector(".closed_element").remove()},h=e=>{const t=e.target.closest(".column");if(e.target.classList.contains("shadow_element")){const e=t.querySelector(".shadow_element");t.insertBefore(l,e)}l.style.width=null,l.style.height=null,l.classList.remove("dragged"),l=void 0,document.querySelector(".shadow_element")&&document.querySelector(".shadow_element").remove(),document.documentElement.removeEventListener("mousemove",i),document.documentElement.removeEventListener("mouseup",h),document.documentElement.removeEventListener("touchmove",m),document.documentElement.removeEventListener("touchend",h),document.addEventListener("mousemove",u),document.addEventListener("touchmove",u)};document.addEventListener("mousemove",u),document.addEventListener("touchmove",u);const g=Array.from(document.querySelectorAll(".column"));g.forEach((e=>e.addEventListener("mousedown",(e=>{if(e.target.closest(".task")){e.preventDefault(),l=e.target.closest(".task");const{width:t,height:n}=l.getBoundingClientRect();l.classList.add("dragged"),document.removeEventListener("mousemove",u),document.querySelector(".closed_element")&&document.querySelector(".closed_element").remove(),l.style.width=`${t}px`,l.style.height=`${n}px`,document.documentElement.addEventListener("mousemove",i),document.documentElement.addEventListener("mouseup",h)}})))),g.forEach((e=>e.addEventListener("touchstart",(e=>{if(e.target.closest(".task")){e.preventDefault(),l=e.target.closest(".task");const{width:t,height:n}=l.getBoundingClientRect();l.classList.add("dragged"),document.removeEventListener("touchmove",u),document.querySelector(".closed_element")&&document.querySelector(".closed_element").remove(),l.style.width=`${t}px`,l.style.height=`${n}px`,document.documentElement.addEventListener("touchmove",m),document.documentElement.addEventListener("touchend",h)}}))))})();
//# sourceMappingURL=main.js.map